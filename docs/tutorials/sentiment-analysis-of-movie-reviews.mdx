---
title: Sentiment Analysis on Movie Reviews using OpenAI and MongoDB
sidebarTitle: Sentiment Analysis on Movie Reviews
---

## Introduction

In this blog post, we present how to create OpenAI models within MongoDB. This example is a sentiment analysis where we infer emotions behind a text i.e, Movie Reviews.

- we'll use datasets from [`Hugging Face`](https://huggingface.co/datasets/rotten_tomatoes)

## Prerequisites

To follow along, you can sign up for an account at [cloud.mindsdb.com](https://cloud.mindsdb.com/register/nlp). Alternatively, head to [MindsDB documentation](https://docs.mindsdb.com/) and follow the instructions to manually set up a local instance of MindsDB via [Docker](/setup/self-hosted/docker) or [pip](/setup/self-hosted/pip/source).

## How to Connect MindsDB to a Database

We use a collection from our MongoDB public movie reviews database, so let’s start by connecting MindsDB to it.

You can use [Mongo Compass](/connect/mongo-compass) or [Mongo Shell](/connect/mongo-shell) to connect your database, which we downloaded from [`Hugging Face`](https://huggingface.co/datasets/rotten_tomatoes), like this:

## Connecting a Database

We start by connecting a demo database using the CREATE DATABASE statement:

- `host` : connection string for the mongodb

```bash
test> use mindsdb
mindsdb> db.databases.insertOne({
            'name': 'mongo_demo_db',
            'engine': 'mongodb',
            'connection_args': {
                "host": "mongodb+srv://<username>:<password>@<cluster host/ID>.mongodb.net/",
                "database": "public"
            }
        })

```

Here is the output:

```bash
{
  acknowledged: true,
  insertedId: ObjectId("6415a242e60077d8d3548786")
}
```

Let’s look at the data stored in the `movie_reviews` table that contains the input columns for the model:

```bash
mindsdb> use mongo_demo_db
mongo_demo_db> db.movie_reviews.find({}).limit(5)
```

Here is the output:

```bash
{
  _id : "64129b66e24d840208b2e498",
  review : "it was good"
},
{
  _id : "64129d44e24d840208b2e49a",
  review : "this is a film well worth seeing , talking and singing heads and all ."
},
{
  _id : "64129d64e24d840208b2e49b",
  review : "ultimately , it ponders the reasons we need stories so much ."
},
{
  _id : "64129d76e24d840208b2e49c",
  review : "everytime you think undercover brother has run out of steam , it finds a new way to surprise and amuse"
},
{
  _id : "64129d8be24d840208b2e49d",
  review : "it's a feel-bad ending for a depressing story that throws a bunch of hot-button items in the viewer's face and asks to be seen as hip, winking social commentary."
}
```

## Creating an OpenAI Model

Our integration automatically manages requests to pre-trained large language models from OpenAI. For example, we can create a model for text sentiment analysis like this:

```bash
mongo_demo_db> use mindsdb
mindsdb> db.models.insertOne({
            name: 'sentiment_classifier_openai',
            predict: 'sentiment',
            training_options: {
                        engine: 'openai',
                        prompt_template: 'describe the sentiment of the reviews strictly as "positive", "neutral", or "negative". "offers that rare combination of entertainment and education":positive "the thing looks like a made-for-home-video quickie":negative "{{review}}.":'
            }
          })
```

Here is the output:

```bash
{
  acknowledged: true,
  insertedId: ObjectId("6415a242e60077d8d3641099")
}
```

In practice, the CREATE MODEL statement triggers MindsDB to generate an AI table called sentiment_classifier_openai that uses the OpenAI integration to predict a column named sentiment.

The USING clause specifies the parameters that this handler requires. You can check our documentation for detailed explanations of all parameters that can be used when creating various models with the OpenAI engine.

Once the above query has started execution, we can check the status of the creation process with the following query:

```bash
mindsdb> db.getCollection('models').find({
            'name': 'sentiment_classifier_openai'
          })
```

It may take a while to register as `complete` depending on the internet connection.

Making a Single Prediction
Once the creation is complete, the behavior is the same as with any other AI table – you can query it either by specifying synthetic data in the actual query:

```bash
mindsdb> db.sentiment_classifier_openai.find({
            review: "it was good"
          })
```

On execution, we get:

```bash
{
  review: "it was good",
  sentiment: "neutral"
}
```

## Making Batch Predictions

Or by joining with another table for batch predictions:

```bash
mindsdb> db.sentiment_classifier_openai.find(
            {
                'collection': 'mongo_demo_db.movie_reviews'
            },
            {
                'sentiment_classifier_openai.sentiment': 'sentiment',
                'movie_reviews.review': 'review'
            }
          ).limit(5)
```

On execution, we get:

```bash
{
  review : "it was good",
  sentiment : "neutral"
},
{
  review : "this is a film well worth seeing , talking and singing heads and all .",
  sentiment : "positive"
},
{
  review : "ultimately , it ponders the reasons we need stories so much .",
  sentiment : "neutral"
},
{
  review : "everytime you think undercover brother has run out of steam , it finds a new way to surprise and amuse",
  sentiment : "positive"
},
{
  review : "it's a feel-bad ending for a depressing story that throws a bunch of hot-button items in the viewer's face and asks to be seen as hip, winking social commentary.",
  sentiment : "negative"
}
```

The `movie_reviews` table is used to make batch predictions. Upon joining the `sentiment_classifier_openai` model with the `movie_reviews` table, the model uses all values from the `review` column.

## Leverage the NLP Capabilities with MindsDB

By integrating databases and OpenAI using MindsDB, developers can easily extract insights from text data with just a few SQL commands. These powerful natural language processing (NLP) models are capable of answering questions with or without context and completing general prompts.

Furthermore, these models are powered by large pre-trained language models from OpenAI, so there is no need for manual development work. Ultimately, this provides developers with an easy way to incorporate powerful NLP capabilities into their applications while saving time and resources compared to traditional ML development pipelines and methods. All in all, MindsDB makes it possible for developers to harness the power of OpenAI efficiently!

MindsDB is now the fastest-growing open-source applied machine-learning platform in the world. Its community continues to contribute to more than 70 data-source and ML-framework integrations. Stay tuned for the upcoming features - including more control over the interface parameters and fine-tuning models directly from MindsDB!

Experiment with OpenAI models within MindsDB and unlock the ML capability over your data in minutes. Remember to [sign-up for a free demo account](https://cloud.mindsdb.com/register/nlp) and follow the tutorials, perhaps this time using your data.

Finally, if MindsDB's vision to democratize ML sounds exciting, head to our [community Slack](https://mindsdb.com/joincommunity), where you can get help and find people to chat about using other available data sources, ML frameworks, or writing a handler to bring your own!

Follow our introduction to MindsDB's OpenAI integration [here](https://mindsdb.com/blog/extract-insights-from-text-inside-databases-using-openai-gpt3-and-mindsdb-integration). Also, we've got a variety of tutorials that use MySQL and MongoDB:

- [Sentiment Analysis in MySQL](/nlp/sentiment-analysis-inside-mysql-with-openai)
- [Question Answering in MySQL](/nlp/question-answering-inside-mysql-with-openai)
- [Text Summarization in MySQL](/nlp/text-summarization-inside-mysql-with-openai)
- [Question Answering in MongoDB](/nlp/question-answering-inside-mongodb-with-openai)
- [Text Summarization in MongoDB](/nlp/text-summarization-inside-mongodb-with-openai)

## What's Next?

Have fun while trying it out yourself!

- Bookmark [MindsDB repository on GitHub](https://github.com/mindsdb/mindsdb).
- Sign up for a free [MindsDB account](https://cloud.mindsdb.com/register/nlp).
- Engage with the MindsDB community on [Slack](https://mindsdb.com/joincommunity) or [GitHub](https://github.com/mindsdb/mindsdb/discussions) to ask questions and share your ideas and thoughts.

If this tutorial was helpful, please give us a GitHub star [here](https://github.com/mindsdb/mindsdb).
